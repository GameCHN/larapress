(function(e){var t={init:function(){this.set_toggle();this.copy_post()},set_toggle:function(){e(document).on("click",".mlp_toggler",function(t){var n=e(e(this).data("toggle_selector"));if("submit"==this.type||"A"==this.tagName){t.stopPropagation();t.preventDefault();n.toggle();return false}if("LABEL"==this.tagName){var r=e("#"+e(this).attr("for"));t.stopPropagation();e('input[name="'+r.attr("name")+'"]').change(function(){n.toggle(r.val()==e(this).val());return true});return true}n.toggle();return false})},copy_post:function(){e(document).on("click",".mlp_copy_button",function(t){t.preventDefault();var n=e(this).data("blog_id"),r="mlp_translation_data_"+n,i=tinyMCE.get(r+"_content"),s=e("#content").val(),o=e("#title").val();if(o)e("#"+r+"_title").val(o);if(s){e("#"+r+"_content").val(s);i.setContent(s)}})}};e(document).ready(function(e){t.init()})})(jQuery);jQuery.noConflict();(function(e){var t={init:function(){t.meta_box_init();t.meta_box_toggle_switch()},meta_box_init:function(){e(".to_translate").css("display","none");e("input.do_translate[checked]").each(function(t,n){e(".translate_"+e(this).attr("data")).toggle();e("#content_"+e(this).attr("data")+"_ifr").height("400px")})},meta_box_toggle_switch:function(){e(".do_translate").live("click",function(){e(".translate_"+e(this).attr("data")).toggle("slow");e("#content_"+e(this).attr("data")+"_ifr").height("400px")})}};e(document).ready(function(e){t.init()})})(jQuery);(function(e){e.fn.mlp_search=function(t){var n=e.extend({remote_blog_id:this.data("remote_blog_id"),remote_post_id:this.data("remote_post_id"),source_blog_id:this.data("source_blog_id"),source_post_id:this.data("source_post_id"),search_field:"input.mlp_search_field",result_container:"ul.mlp_search_results",action:"mlp_search",nonce:"",spinner:'<span class="spinner no-float" style="display:block;"></span>'},t),r=e(n.result_container).html(),i=e(n.search_field),s=[],o=function(t){e(n.result_container).html(t)},u=function(t){if(s[t]){o(s[t]);return}o(n.spinner);var r=e.post(ajaxurl,{action:n.action,source_post_id:n.source_post_id,source_blog_id:n.source_blog_id,remote_post_id:n.remote_post_id,remote_blog_id:n.remote_blog_id,s:t});r.done(function(e){s[t]=e;o(e)})};i.keypress(function(e){if(e.which==13)return false});i.on("keyup",function(t){t.preventDefault();t.stopPropagation();var n=e.trim(this.value);if(!n||0==n.length)o(r);if(2<n.length){u(n)}})}})(jQuery);(function(e){e(".mlp_rsc_save_reload").on("click.mlp",function(t){t.stopPropagation();t.preventDefault();var n=e(this).data("source_post_id"),r=e(this).data("source_blog_id"),i=e(this).data("remote_post_id"),s=e(this).data("remote_blog_id"),o=e('input[name="mlp_rsc_action['+s+']"]:checked').val(),u=0,a="",f=function(){p("disconnect")},l=function(){a=e('input[name="post_title"]').val();p("new_relation")},c=function(){u=e('input[name="mlp_add_post['+s+']"]:checked').val();if(!u||0==u)alert("Please select a post.");else p("connect_existing")},h=function(e,t,n){console.log("ajax_success",{as_data:e,as_textStatus:t,as_jqXHR:n});window.location.reload(true)},p=function(t){var o={action:"mlp_rsc_"+t,source_post_id:n,source_blog_id:r,remote_post_id:i,remote_blog_id:s,new_post_id:u,new_post_title:a};e.ajax({type:"POST",url:ajaxurl,data:o,success:h,async:false})};if(!o||"stay"==o)return;if("disconnect"==o)f();if("new"==o)l();if("search"==o)c()})})(jQuery);jQuery(document).ready(function(e){e("#submit-mlp_language").click(function(t){t.preventDefault();var n=e("#"+mlp_nav_menu.metabox_list_id+" li :checked"),r=e("#submit-mlp_language"),i=[],s={action:mlp_nav_menu.action},o=e("#menu").val();n.each(function(){i.push(e(this).val())});e("#"+mlp_nav_menu.metabox_id).find(".spinner").show();r.prop("disabled",true);s["mlp_sites"]=i;s[mlp_nav_menu.nonce_name]=mlp_nav_menu.nonce;s["menu"]=o;e.post(mlp_nav_menu.ajaxurl,s,function(t){e("#menu-to-edit").append(t);e("#"+mlp_nav_menu.metabox_id).find(".spinner").hide();n.prop("checked",false);r.prop("disabled",false)})})});(function(e){var t={init:function(){e("#mlp_quicklink_container").submit(function(){e(this).attr("method","get");document.location.href=e(this).find("option:selected").val();return false})}};e(document).ready(function(e){t.init()})})(jQuery)